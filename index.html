<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>iPrincesses Dating App</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:0; }
    .container { max-width:400px; margin:50px auto; background:white; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); text-align:center; }
    input { width:90%; padding:10px; margin:10px 0; border-radius:5px; border:1px solid #ccc; }
    .btn { padding:10px 20px; margin:5px; border:none; border-radius:5px; background:#ff69b4; color:white; cursor:pointer; }
    .btn:hover { background:#ff1493; }
    .profile-card { display:inline-block; width:150px; margin:10px; text-align:center; background:white; padding:10px; border-radius:10px; box-shadow:0 0 5px rgba(0,0,0,0.1); }
    .profile-card img { width:100px; height:100px; border-radius:50%; object-fit:cover; }
    /* Modal */
    #signupModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
    #signupModal .modal-content { background:white; padding:20px; border-radius:10px; width:90%; max-width:400px; text-align:center; }
  </style>
</head>
<body>

  <div class="container">
    <h1>iPrincesses</h1>
    <h3>Login</h3>
    <input type="email" id="loginEmail" placeholder="Email">
    <input type="password" id="loginPassword" placeholder="Password">
    <button class="btn" onclick="login()">Login</button>
    <button class="btn" onclick="openSignupModal()">Sign Up</button>
  </div>

  <div id="profiles" class="container"></div>

  <!-- Signup Modal -->
  <div id="signupModal">
    <div class="modal-content">
      <h2>Sign Up</h2>
      <input type="text" id="modalName" placeholder="Full Name"><br>
      <input type="email" id="modalEmail" placeholder="Email"><br>
      <input type="password" id="modalPassword" placeholder="Password"><br>
      <button class="btn" onclick="signupModal()">Submit</button>
      <button class="btn" onclick="closeSignupModal()">Cancel</button>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script>
    // === Firebase config (replace with your own) ===
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT.appspot.com",
      messagingSenderId: "YOUR_MESSAGING_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Open/Close Modal
    function openSignupModal() { document.getElementById('signupModal').style.display = 'flex'; }
    function closeSignupModal() { document.getElementById('signupModal').style.display = 'none'; }

    // Signup Modal Function
    async function signupModal() {
      const name = document.getElementById('modalName').value;
      const email = document.getElementById('modalEmail').value;
      const password = document.getElementById('modalPassword').value;

      if (!name || !email || !password) {
        alert("Please fill all fields!");
        return;
      }

      try {
        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
        const uid = userCredential.user.uid;

        await db.collection('users').doc(uid).set({
          name: name,
          email: email,
          photoURL: "https://via.placeholder.com/150"
        });

        alert("Sign Up successful!");
        closeSignupModal();
        loadProfiles();
      } catch (e) {
        alert(e.message);
      }
    }

    // Login Function
    async function login() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;

      if (!email || !password) {
        alert("Please fill all fields!");
        return;
      }

      try {
        await auth.signInWithEmailAndPassword(email, password);
        alert("Login successful!");
        loadProfiles();
      } catch (e) {
        alert(e.message);
      }
    }

    // Load Profiles
    async function loadProfiles() {
      const users = await db.collection('users').get();
      const container = document.getElementById('profiles');
      container.innerHTML = '';

      users.forEach(doc => {
        const u = doc.data();
        container.innerHTML += `
          <div class="profile-card">
            <img src="${u.photoURL}" alt="Profile">
            <h3>${u.name}</h3>
            <button class="btn" onclick="alert('Messaging ${u.name} coming soon!')">Message</button>
          </div>`;
      });
    }

    loadProfiles(); // Initial load
  </script>

</body>
</html>
